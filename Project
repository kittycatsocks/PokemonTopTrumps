import random
import requests
import webbrowser

print("Welcome to the Pokemon battle!\n")

def random_pokemon():
  pokedex_number = random.randint(1, 151)
  url = 'https://pokeapi.co/api/v2/pokemon/{}/'.format(pokedex_number)
  response = requests.get(url)
  pokemon_stats = response.json()
  return {'name' : pokemon_stats['name'], 'id' : pokemon_stats['id'], 'height' : pokemon_stats['height'], 'weight' : pokemon_stats['weight'],}



def run():
  player_one_pokemon = random_pokemon()
  print("You were given {}. It's ID is {}, it's height is {}cm and weight is {}kg".format(player_one_pokemon['name'], player_one_pokemon['id'], player_one_pokemon['height'], player_one_pokemon['weight']))
  player_two_pokemon = random_pokemon()
  print("\nYour opponent was given {}".format(player_two_pokemon['name']))
  chosen_stat = input("\nWhich stats would you like to choose? select either id, height or weight ")
  player_one_stat = player_one_pokemon[chosen_stat]
  player_two_stat = player_two_pokemon[chosen_stat]
    
  if player_one_stat > player_two_stat:
    print ("\nYou win! Your Pokemon's {} was {} and your opponents was {}".format(chosen_stat, player_one_stat, player_two_stat))
    webbrowser.open('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/{}.png'.format(player_one_pokemon['id']))
  elif player_two_stat > player_one_stat:
    print ("\nYou lose! Your Pokemon's {} was {} and your opponents was {}".format(chosen_stat, player_one_stat, player_two_stat))
    webbrowser.open('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/{}.png'.format(player_two_pokemon['id']))
  else:
    print('Draw!')


run()

end_of_game = input("\nWould you like to play again? y/n ")
if end_of_game == "y":
  print("\n")
  run()
else:
  print("\nThanks for playing!")
